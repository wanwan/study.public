.section .text
	.global _start
_start:

//hello-os
//TAB=4

	.org	0
	
//以下は標準的なFAT12フォーマットフロッピーディスクのための記述

	.byte	0xeb, 0x4e, 0x90
	.ascii	"HELLOIPL"		// ブートセクタの名前を自由に書いてよい（8バイト）
	.word	512			// 1セクタの大きさ（512にしなければいけない）
	.byte	1			// クラスタの大きさ（1セクタにしなければいけない）
	.word	1			// FATがどこから始まるか（普通は1セクタ目からにする）
	.byte	2			// FATの個数（2にしなければいけない）
	.word	224			// ルートディレクトリ領域の大きさ（普通は224エントリにする）
	.word	2880			// このドライブの大きさ（2880セクタにしなければいけない）
	.byte	0xf0			// メディアのタイプ（0xf0にしなければいけない）
	.word	9			// FAT領域の長さ（9セクタにしなければいけない）
	.word	18			// 1トラックにいくつのセクタがあるか（18にしなければいけない）
	.word	2			// ヘッドの数（2にしなければいけない）
	.long	0			// パーティションを使ってないのでここは必ず0
	.long	2880			// このドライブ大きさをもう一度書く
	.byte	0,0,0x29		// よくわからないけどこの値にしておくといいらしい
	.long	0xffffffff		// たぶんボリュームシリアル番号
	.ascii	"HELLO-OS   "		// ディスクの名前（11バイト）
	.ascii	"FAT12   "		// フォーマットの名前（8バイト）
	.org	.+18			// とりあえず18バイトあけておく
	
// プログラム本体
	
	.byte	0xb8, 0x00, 0x00, 0x8e, 0xd0, 0xbc, 0x00, 0x7c
	.byte	0x8e, 0xd8, 0x8e, 0xc0, 0xbe, 0x74, 0x7c, 0x8a
	.byte	0x04, 0x83, 0xc6, 0x01, 0x3c, 0x00, 0x74, 0x09
	.byte	0xb4, 0x0e, 0xbb, 0x0f, 0x00, 0xcd, 0x10, 0xeb
	.byte	0xee, 0xf4, 0xeb, 0xfd
	
// メッセージ部分

	.byte	0x0a, 0x0a		// 改行を2つ
	.ascii	"hello, world"
	.byte	0x0a			// 改行
	.byte		0

	.org	0x1fe			// 0x001feまでを0x00で埋める命令

	.byte	0x55, 0xaa

// 以下はブートセクタ以外の部分の記述

	.byte	0xf0, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00
	.org    .+ 4600	
	.byte	0xf0, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00
	.org    .+1469432	
	
	
//	.byte	0xeb, 0x4e, 0x90, 0x48, 0x45, 0x4c, 0x4c, 0x4f
//	.byte	0x49, 0x50, 0x4c, 0x00, 0x02, 0x01, 0x01, 0x00
//	.byte	0x02, 0xe0, 0x00, 0x40, 0x0b, 0xf0, 0x09, 0x00
//	.byte	0x12, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00
//	.byte	0x40, 0x0b, 0x00, 0x00, 0x00, 0x00, 0x29, 0xff
//	.byte	0xff, 0xff, 0xff, 0x48, 0x45, 0x4c, 0x4c, 0x4f
//	.byte	0x2d, 0x4f, 0x53, 0x20, 0x20, 0x20, 0x46, 0x41
//	.byte	0x54, 0x31, 0x32, 0x20, 0x20, 0x20, 0x00, 0x00
//	.org	.+16
//	.byte	0xb8, 0x00, 0x00, 0x8e, 0xd0, 0xbc, 0x00, 0x7c
//	.byte	0x8e, 0xd8, 0x8e, 0xc0, 0xbe, 0x74, 0x7c, 0x8a
//	.byte	0x04, 0x83, 0xc6, 0x01, 0x3c, 0x00, 0x74, 0x09
//	.byte	0xb4, 0x0e, 0xbb, 0x0f, 0x00, 0xcd, 0x10, 0xeb
//	.byte	0xee, 0xf4, 0xeb, 0xfd, 0x0a, 0x0a, 0x68, 0x65
//	.byte	0x6c, 0x6c, 0x6f, 0x2c, 0x20, 0x77, 0x6f, 0x72
//	.byte	0x6c, 0x64, 0x0a, 0x00, 0x00, 0x00, 0x00, 0x00
//	.org    .+368
//	.byte	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x55, 0xaa
//	.byte	0xf0, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00
//	.org    .+ 4600
//	.byte	0xf0, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00
//	.org    .+1469432

